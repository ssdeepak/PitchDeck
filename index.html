<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Semantic Domain-to-Code Compiler</title>
  <meta name="description" content="Transform a domain topic into a governed semantic blueprint, executable DSL, simulation, and multi-target code generation." />
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "Semantic Domain-to-Code Compiler",
    "applicationCategory": "DeveloperTool",
    "description": "Converts a domain topic into a KnowledgeMap, contracts, executable DSL, simulation, and deterministic multi-target code generation.",
    "operatingSystem": "Cross-platform",
    "softwareVersion": "0.9.0",
    "offers": {"@type": "Offer", "price": "0", "priceCurrency": "USD"}
  }
  </script>
  <style>
    :root {
      --bg: #0f1115;
      --panel: #1b1f27;
      --panel-alt: #242a33;
      --text: #e6ecf3;
      --muted: #96a3b6;
      --accent: #5b9bff;
      --accent-glow: #8bc1ff;
      --danger: #ff4772;
      --ok: #3adba6;
      --warning: #ffb347;
      --font-stack: system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;
      --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      --shadow: 0 4px 16px -4px rgba(0,0,0,.4);
      --shadow-hover: 0 8px 32px -8px rgba(91,155,255,.3);
    }
    * { box-sizing: border-box; }
  body { 
    margin:0; 
    font-family: var(--font-stack); 
    color: var(--text); 
    background: var(--bg); 
    -webkit-font-smoothing: antialiased; 
    transition: background .35s, color .35s; 
    line-height: 1.6;
    scroll-behavior: smooth;
  }
  body.theme-light { 
    --bg:#f8fafc; 
    --panel:#ffffff; 
    --panel-alt:#f1f5f9; 
    --text:#1e293b; 
    --muted:#64748b; 
    --accent:#2563eb; 
    --accent-glow:#1d4ed8; 
    --danger:#dc2626; 
    --ok:#059669; 
    --warning:#d97706;
    --shadow: 0 4px 16px -4px rgba(0,0,0,.1);
    --shadow-hover: 0 8px 32px -8px rgba(37,99,235,.2);
  }
    a { color: var(--accent); text-decoration: none; transition: color .2s ease; }
    a:hover { text-decoration: underline; color: var(--accent-glow); }
    header { 
      padding: 4rem 1.5rem 3rem; 
      text-align: center; 
      background: linear-gradient(145deg,#0a0d14,#1a2330 55%,#12161d); 
      position: relative; 
      overflow: hidden;
      border-bottom: 1px solid rgba(255,255,255,.1);
    }
    header:before { 
      content:""; 
      position:absolute; 
      inset:0; 
      background: radial-gradient(circle at 20% 30%, rgba(91,155,255,0.15), transparent 60%), radial-gradient(circle at 80% 70%, rgba(58,219,166,0.12), transparent 60%); 
      pointer-events:none; 
    }
    h1 { 
      font-size: clamp(2.2rem, 5.5vw, 3.8rem); 
      margin:0 0 1.5rem; 
      letter-spacing:.5px; 
      font-weight: 700;
      background: linear-gradient(135deg, var(--text), var(--accent-glow));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .tagline { 
      font-size: clamp(1.1rem, 1.8vw, 1.5rem); 
      max-width: 1000px; 
      margin: 0 auto 2.5rem; 
      line-height:1.5; 
      color: var(--muted);
    }
    .cta-row { 
      display:flex; 
      flex-wrap:wrap; 
      gap:1rem; 
      justify-content:center; 
      margin-bottom: 1rem;
    }
    .btn { 
      display:inline-flex; 
      align-items:center; 
      gap:.5rem; 
      background: var(--accent); 
      color:#ffffff; 
      padding:1rem 1.5rem; 
      font-weight:600; 
      border-radius: .75rem; 
      box-shadow: var(--shadow); 
      transition: all .25s ease; 
      border: none;
      cursor: pointer;
      font-size: .95rem;
      text-decoration: none;
    }
    .btn.secondary { 
      background: var(--panel-alt); 
      color: var(--text); 
      border: 1px solid rgba(255,255,255,.1);
    }
    .btn:hover { 
      transform: translateY(-2px); 
      box-shadow: var(--shadow-hover); 
      text-decoration: none;
    }
    nav { 
      position:sticky; 
      top:0; 
      background: rgba(15,17,21,0.9); 
      -webkit-backdrop-filter: blur(12px);
      backdrop-filter: blur(12px); 
      border-bottom:1px solid rgba(255,255,255,.1); 
      z-index:40; 
      padding: .5rem 0;
    }
    nav ul { 
      margin:0; 
      padding:0 1.5rem; 
      display:flex; 
      gap:.5rem; 
      flex-wrap:wrap; 
      list-style:none; 
      font-size:.9rem;
      justify-content: center;
      max-width: 1200px;
      margin: 0 auto;
    }
  nav a { 
    padding:.75rem 1rem; 
    border-radius:.5rem; 
    display:inline-block; 
    position:relative; 
    transition: all .2s ease;
    white-space: nowrap;
  }
  nav a.active { background: var(--accent); color: #ffffff; transform: translateY(-1px); }
  nav a:hover { background: var(--panel-alt); }
    main { 
      max-width: 1200px; 
      margin: 0 auto; 
      padding: 3rem 1.5rem 6rem; 
      line-height:1.65; 
    }
    section { 
      margin-bottom: 5rem; 
      scroll-margin-top: 100px;
    }
    h2 { 
      margin:0 0 1.5rem; 
      font-size: clamp(1.8rem,3.5vw,2.5rem); 
      font-weight: 700;
      color: var(--text);
      position: relative;
    }
    h2:after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 0;
      width: 60px;
      height: 3px;
      background: linear-gradient(90deg, var(--accent), var(--accent-glow));
      border-radius: 2px;
    }
    h3 { 
      margin-top:2.5rem; 
      margin-bottom: 1rem;
      font-size:1.35rem; 
      letter-spacing:.5px; 
      font-weight:700; 
      color: var(--accent-glow); 
    }
    p { 
      margin: 0 0 1.25rem; 
      font-size: 1.05rem;
      color: var(--text);
    }
    code, pre { 
      font-family: var(--mono); 
      background: var(--panel); 
      color: #d6efff; 
      border:1px solid rgba(255,255,255,.1); 
      border-radius:.6rem; 
      font-size:.9rem; 
      line-height:1.5; 
    }
    pre { 
      padding:1.5rem; 
      overflow:auto; 
      position:relative; 
      box-shadow: var(--shadow);
    }
    .grid { 
      display:grid; 
      gap:2rem; 
    }
    @media (min-width:768px){ 
      .grid.cols-3 { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); } 
      .grid.cols-4 { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); } 
    }
    .card { 
      background: linear-gradient(160deg, var(--panel), var(--panel-alt)); 
      padding:1.75rem; 
      border:1px solid rgba(255,255,255,.1); 
      border-radius:1rem; 
      position:relative; 
      box-shadow: var(--shadow); 
      transition: transform .2s ease, box-shadow .2s ease;
    }
    .card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-hover);
    }
    .card h4 { 
      margin:.25rem 0 1rem; 
      font-size:1.2rem; 
      font-weight: 600;
      color: var(--accent-glow);
    }
    .muted { 
      color: var(--muted); 
      font-size:.95rem; 
    }
    .accent { 
      color: var(--accent-glow); 
      font-weight: 600;
    }
    .table-wrap { 
      overflow:auto; 
      border:1px solid rgba(255,255,255,.1); 
      border-radius:.8rem; 
      margin:1.5rem 0 2rem; 
      box-shadow: var(--shadow);
    }
    table { 
      border-collapse: collapse; 
      width:100%; 
      min-width:700px; 
      font-size:.9rem; 
    }
    th, td { 
      padding:1rem .75rem; 
      border-bottom:1px solid rgba(255,255,255,.1); 
      text-align:left; 
    }
    th { 
      background: var(--panel-alt); 
      font-weight:700; 
      color: var(--accent-glow); 
      position:sticky; 
      top:0; 
      font-size: .85rem;
      text-transform: uppercase;
      letter-spacing: .5px;
    }
    tr:last-child td { border-bottom:none; }
    tr:hover { background: rgba(255,255,255,.02); }
    .pipeline { 
      font-family: var(--mono); 
      font-size:.8rem; 
      line-height:1.4; 
      white-space:pre; 
      background: var(--panel); 
      padding:1.5rem; 
      border:1px solid rgba(255,255,255,.1); 
      border-radius:.8rem; 
      box-shadow: var(--shadow);
      margin: 1.5rem 0;
    }
    
    /* Mermaid diagram specific styles */
    .diagram-container {
      background: linear-gradient(145deg, var(--panel), var(--panel-alt));
      border: 1px solid rgba(255,255,255,.15);
      border-radius: 1rem;
      padding: 2rem;
      margin: 2rem 0 3rem;
      box-shadow: var(--shadow);
      overflow: hidden;
      position: relative;
    }
    
    .diagram-container:before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--accent), var(--accent-glow), var(--ok));
      border-radius: 1rem 1rem 0 0;
    }
    
    .diagram-container .mermaid {
      font-family: var(--font-stack) !important;
      background: transparent !important;
      padding: 1rem !important;
      text-align: center;
      white-space: normal;
      font-size: 0.9rem;
      line-height: 1.4;
    }
    
    .diagram-container .mermaid svg {
      max-width: 100% !important;
      height: auto !important;
      background: transparent !important;
      border-radius: 0.5rem;
      filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
    }
    
    /* Mobile optimizations for diagrams */
    @media (max-width: 768px) {
      .diagram-container {
        padding: 1rem;
        margin: 1.5rem 0 2rem;
      }
      
      .diagram-container .mermaid {
        font-size: 0.75rem !important;
        padding: 0.5rem !important;
      }
      
      .diagram-container .mermaid svg {
        max-height: 400px;
        width: 100% !important;
      }
      
      /* Force mermaid to be more compact on mobile */
      .diagram-container .mermaid .node rect {
        rx: 8 !important;
        ry: 8 !important;
      }
      
      .diagram-container .mermaid .node text {
        font-size: 11px !important;
      }
    }
    
    /* Enhanced h3 styling for diagram sections */
    section h3 {
      font-size: 1.4rem;
      margin: 3rem 0 1.5rem;
      padding: 1rem 1.5rem;
      background: linear-gradient(135deg, rgba(91,155,255,0.1), rgba(58,219,166,0.1));
      border-left: 4px solid var(--accent);
      border-radius: 0.5rem;
      color: var(--accent-glow);
      font-weight: 700;
      position: relative;
    }
    
    section h3:first-of-type {
      margin-top: 2rem;
    }
    
    /* Regular pipeline text styling */
    .pipeline:not(:has(.mermaid)) {
      white-space: pre;
      font-family: var(--mono);
    }
    .badge-row { 
      display:flex; 
      gap:.75rem; 
      flex-wrap:wrap; 
      margin:1.5rem 0 2rem; 
    }
    .badge { 
      background: var(--panel-alt); 
      border:1px solid rgba(255,255,255,.1); 
      padding:.6rem .9rem; 
      font-size:.75rem; 
      letter-spacing:.5px; 
      border-radius:1.5rem; 
      text-transform:uppercase; 
      color: var(--accent-glow); 
      font-weight: 600;
    }
    .hero-kpis { 
      display:grid; 
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap:1.5rem; 
      margin-top:3rem; 
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }
    .kpi { 
      background: linear-gradient(135deg, var(--panel), var(--panel-alt)); 
      padding:1.5rem 1rem; 
      border:1px solid rgba(255,255,255,.1); 
      border-radius:1rem; 
      text-align:center; 
      box-shadow: var(--shadow);
      transition: transform .2s ease;
    }
    .kpi:hover {
      transform: translateY(-2px);
    }
    .kpi .val { 
      font-size:1.8rem; 
      font-weight:700; 
      color: var(--ok); 
      display: block;
      margin-bottom: .5rem;
    }
    .kpi .label { 
      font-size:.75rem; 
      letter-spacing:1px; 
      text-transform:uppercase; 
      color: var(--muted); 
      font-weight: 600;
    }
    footer { 
      background: linear-gradient(145deg, #0a0d14, #1a2330); 
      padding:3rem 1.5rem 4rem; 
      font-size:.9rem; 
      color: var(--muted); 
      text-align: center;
      border-top: 1px solid rgba(255,255,255,.1);
    }
    footer p {
      margin: 0 0 1rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    footer a { 
      color: var(--accent); 
      font-weight: 500;
    }
    .anchor-link { 
      opacity:0; 
      margin-left:.5rem; 
      font-size:.8rem; 
      color: var(--muted);
    }
    h2:hover .anchor-link, h3:hover .anchor-link { opacity:1; }
    .inline-link-block { 
      margin-top:1.5rem; 
      display:flex; 
      gap:1rem; 
      flex-wrap:wrap; 
    }
    .cta-panel { 
      background: linear-gradient(135deg, var(--panel), var(--panel-alt)); 
      border:1px solid rgba(255,255,255,.1); 
      padding:3rem 2rem 3.5rem; 
      border-radius:1.5rem; 
      max-width:1000px; 
      margin:0 auto; 
      text-align:center; 
      box-shadow: var(--shadow);
    }
    .cta-panel h2 { margin-top:0; }
    .cta-panel h2:after { display: none; }
    .split { 
      display:grid; 
      gap:3rem; 
    }
    @media (min-width:1000px){ 
      .split { 
        grid-template-columns: 1fr 1fr; 
        align-items:start; 
      } 
    }
    .highlight { 
      background: linear-gradient(90deg,rgba(91,155,255,.2),rgba(58,219,166,.15)); 
      padding:.35rem .7rem; 
      border-radius:.5rem; 
      font-weight: 600;
    }
  .theme-toggle-wrap { 
    position:absolute; 
    right:1.5rem; 
    top:1.5rem; 
    display:flex; 
    gap:.6rem; 
  }
  .theme-toggle-btn { 
    background:var(--panel-alt); 
    color:var(--text); 
    border:1px solid rgba(255,255,255,.2); 
    padding:.7rem 1rem; 
    border-radius:.8rem; 
    cursor:pointer; 
    font-size:.75rem; 
    letter-spacing:.5px; 
    font-weight: 600;
    transition: all .2s ease;
  }
  .theme-toggle-btn:hover {
    background: var(--accent);
    color: #ffffff;
    transform: translateY(-1px);
  }
  .cta-row.margin-top { margin-top:2rem; }
  .note-muted { 
    margin-top:2rem; 
    font-size:.9rem; 
    color:var(--muted); 
    font-style: italic;
  }
  
  /* Mobile improvements */
  @media (max-width: 768px) {
    header { padding: 3rem 1rem 2.5rem; }
    h1 { font-size: 2.2rem; }
    .tagline { font-size: 1.1rem; }
    nav ul { 
      justify-content: flex-start; 
      overflow-x: auto; 
      padding: 0 1rem;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    nav ul::-webkit-scrollbar { display: none; }
    nav a { white-space: nowrap; }
    main { padding: 2rem 1rem 4rem; }
    .hero-kpis { grid-template-columns: repeat(2, 1fr); }
    .cta-panel { margin: 0 1rem; padding: 2rem 1.5rem; }
    .btn { padding: .9rem 1.2rem; font-size: .9rem; }
  }
  </style>
</head>
<body>
  <header>
    <div class="theme-toggle-wrap">
      <button id="themeToggle" class="theme-toggle-btn" aria-label="Toggle theme">LIGHT</button>
    </div>
    <h1>Semantic Domain‑to‑Code Compiler</h1>
    <p class="tagline">From a single topic input to a 10‑level semantic KnowledgeMap, canonical contracts, an executable DSL, simulation, and deterministic multi‑target code generation. <span class="highlight">Compile once. Regenerate forever.</span></p>
    <div class="cta-row">
      <a class="btn" href="#pipeline">View Pipeline</a>
      <a class="btn secondary" href="#dsl-examples">DSL Examples</a>
      <a class="btn secondary" href="WHITEPAPER_REVISED.md" target="_blank" rel="noopener">Full Whitepaper</a>
      <a class="btn secondary" href="DSL_GRAMMAR_REFERENCE.md" target="_blank" rel="noopener">Grammar Reference</a>
    </div>
    <div class="hero-kpis">
      <div class="kpi"><div class="val">10‑Level</div><div class="label">Depth Mapping</div></div>
      <div class="kpi"><div class="val">-37%</div><div class="label">Entropy (β)</div></div>
      <div class="kpi"><div class="val">18 min</div><div class="label">Idea → DSL (α)</div></div>
      <div class="kpi"><div class="val">4 Targets</div><div class="label">Current Outputs</div></div>
    </div>
  </header>
  <nav>
    <ul>
      <li><a href="#pipeline">Pipeline</a></li>
      <li><a href="#differentiation">Differentiation</a></li>
      <li><a href="#knowledge-map">KnowledgeMap</a></li>
      <li><a href="#contracts">Contracts</a></li>
      <li><a href="#dsl">DSL</a></li>
      <li><a href="#multi-dsl">Multi‑DSL</a></li>
      <li><a href="#interpreter">Simulation</a></li>
      <li><a href="#codegen">Codegen</a></li>
      <li><a href="#governance">Governance</a></li>
      <li><a href="#security">Security</a></li>
      <li><a href="#metrics">Metrics</a></li>
      <li><a href="#dsl-examples">Examples</a></li>
      <li><a href="#cta">Get Started</a></li>
    </ul>
  </nav>
  <main>
    <section id="quick-start">
      <h2>Quick Start<a class="anchor-link" href="#quick-start">§</a></h2>
      <p>Illustrative CLI (roadmap) showing lifecycle actions from topic capture to multi-target emission.</p>
      <pre><code># Initialize a new semantic project
sdcc init predictive-maintenance

# Explore domain to depth 10 and extract contracts
sdcc explore "Predictive Maintenance Platform for Industrial Pumps" --depth 10

# Synthesize spec & first DSL draft
sdcc synthesize --out plan.xml

# Simulate behavior before code generation
sdcc simulate plan.xml --trace --speed=fast

# Transpile into multiple targets
sdcc transpile plan.xml --targets ts,dart,csharp,html --out ./generated

# Enrich & partial regenerate after domain update
sdcc enrich add-node EnergyUsage --parent PumpOperations
sdcc regenerate plan.xml --partial

# Lint & (future) test harness
sdcc lint plan.xml
sdcc test plan.xml
</code></pre>
      <p class="muted">Commands are conceptual—actual interface will evolve.</p>
    </section>
    <section id="pipeline">
      <h2>Visual Architecture Overview<a class="anchor-link" href="#pipeline">§</a></h2>
      <p>From a single domain topic to production-ready, multi-target applications. Each diagram below shows a critical aspect of our semantic compilation approach.</p>
      
      <!-- Main Pipeline Flow -->
      <h3>🚀 Complete Transformation Pipeline</h3>
      <div class="diagram-container">
        <div class="mermaid">
graph TD
    A[🎯 Domain Topic Input] --> B[🧠 AI Knowledge Mapping]
    B --> C[📊 10-Level Semantic Structure]
    C --> D[🔧 Enrichment & Auto-Fix]
    D --> E[📋 Canonical Contracts]
    E --> F[⚙️ Executable DSL Generation]
    F --> G[🎨 Visual/Block Editor]
    G --> H[🔍 Behavioral Simulation]
    H --> I[💻 Multi-Target Codegen]
    I --> J[🔄 Partial Regeneration]
    
    style A fill:#5b9bff,stroke:#8bc1ff,stroke-width:3px,color:#fff
    style C fill:#3adba6,stroke:#2dd4bf,stroke-width:2px,color:#fff
    style F fill:#ff4772,stroke:#f43f5e,stroke-width:2px,color:#fff
    style I fill:#ffb347,stroke:#fb923c,stroke-width:2px,color:#fff
        </div>
      </div>
      
      <!-- Knowledge Map Structure -->
      <h3>🧠 10-Level Knowledge Map Structure</h3>
      <div class="diagram-container">
        <div class="mermaid">
graph TB
    subgraph "🎯 Domain Intelligence Layers"
        L1[Level 1: Core Entities]
        L2[Level 2: Relationships]
        L3[Level 3: Behaviors]
        L4[Level 4: Constraints]
        L5[Level 5: Data Flow]
        L6[Level 6: Business Rules]
        L7[Level 7: Integration Points]
        L8[Level 8: Performance Models]
        L9[Level 9: Security Patterns]
        L10[Level 10: Deployment Strategy]
    end
    
    L1 --> L2 --> L3 --> L4 --> L5
    L5 --> L6 --> L7 --> L8 --> L9 --> L10
    
    L10 --> DSL[🎨 Generated DSL]
    DSL --> SIM[🔍 Simulation Engine]
    DSL --> CODE[💻 Code Generation]
    
    style L1 fill:#5b9bff,stroke:#8bc1ff,stroke-width:2px,color:#fff
    style L5 fill:#3adba6,stroke:#2dd4bf,stroke-width:2px,color:#fff
    style L10 fill:#ff4772,stroke:#f43f5e,stroke-width:2px,color:#fff
    style DSL fill:#ffb347,stroke:#fb923c,stroke-width:3px,color:#fff
        </div>
      </div>
      
      <!-- Multi-Target Generation -->
      <h3>🎯 Multi-Target Code Generation</h3>
      <div class="diagram-container">
        <div class="mermaid">
graph LR
    subgraph "🏗️ Single DSL Source"
        DSL[📝 Semantic DSL<br/>S-IR Format]
    end
    
    subgraph "🎯 Target Platforms"
        TS[📱 TypeScript<br/>React/Vue/Angular]
        DART[🎨 Dart<br/>Flutter Mobile]
        CS[⚡ C#<br/>.NET/Blazor]
        PY[🐍 Python<br/>FastAPI/Django]
        GO[🚀 Go<br/>Microservices]
        SQL[🗄️ SQL<br/>Database Schema]
    end
    
    DSL --> TS
    DSL --> DART
    DSL --> CS
    DSL --> PY
    DSL --> GO
    DSL --> SQL
    
    style DSL fill:#5b9bff,stroke:#8bc1ff,stroke-width:3px,color:#fff
    style TS fill:#3adba6,stroke:#2dd4bf,stroke-width:2px,color:#fff
    style DART fill:#ff4772,stroke:#f43f5e,stroke-width:2px,color:#fff
    style CS fill:#ffb347,stroke:#fb923c,stroke-width:2px,color:#fff
        </div>
      </div>
      
      <!-- Value Proposition -->
      <h3>💎 Value Proposition Flow</h3>
      <div class="diagram-container">
        <div class="mermaid">
graph TD
    PROBLEM[❌ Traditional Development<br/>• Scattered Knowledge<br/>• Inconsistent Implementation<br/>• High Maintenance Cost] 
    
    SOLUTION[✅ Semantic Compilation<br/>• Centralized Domain Model<br/>• Consistent Multi-Target Output<br/>• Regenerative Architecture]
    
    subgraph "🔄 Regenerative Benefits"
        REGEN1[📈 Stack Migration<br/>React → Vue in minutes]
        REGEN2[🔧 Feature Updates<br/>Change once, deploy everywhere]
        REGEN3[📊 Performance Optimization<br/>Auto-optimize per target]
        REGEN4[🛡️ Security Updates<br/>Centralized policy enforcement]
    end
    
    PROBLEM -->|Transform with| SOLUTION
    SOLUTION --> REGEN1
    SOLUTION --> REGEN2
    SOLUTION --> REGEN3
    SOLUTION --> REGEN4
    
    style PROBLEM fill:#ff4772,stroke:#f43f5e,stroke-width:2px,color:#fff
    style SOLUTION fill:#3adba6,stroke:#2dd4bf,stroke-width:3px,color:#fff
    style REGEN1 fill:#5b9bff,stroke:#8bc1ff,stroke-width:2px,color:#fff
    style REGEN2 fill:#5b9bff,stroke:#8bc1ff,stroke-width:2px,color:#fff
    style REGEN3 fill:#5b9bff,stroke:#8bc1ff,stroke-width:2px,color:#fff
    style REGEN4 fill:#5b9bff,stroke:#8bc1ff,stroke-width:2px,color:#fff
        </div>
      </div>
      
      <!-- Simulation Engine -->
      <h3>🔍 Pre-Generation Simulation</h3>
      <div class="diagram-container">
        <div class="mermaid">
graph LR
    subgraph "🎮 Simulation Engine"
        SIM_INPUT[📊 DSL Specification]
        SIM_ENGINE[⚙️ Behavioral Simulator]
        SIM_OUTPUT[📈 Validation Results]
    end
    
    subgraph "🔍 Validation Types"
        PERF[⚡ Performance Testing]
        SECURITY[🛡️ Security Analysis]
        INTEGRATION[🔗 Integration Testing]
        BUSINESS[📋 Business Logic Validation]
    end
    
    SIM_INPUT --> SIM_ENGINE
    SIM_ENGINE --> SIM_OUTPUT
    
    SIM_ENGINE --> PERF
    SIM_ENGINE --> SECURITY
    SIM_ENGINE --> INTEGRATION
    SIM_ENGINE --> BUSINESS
    
    SIM_OUTPUT --> CODEGEN[✅ Approved for Generation]
    SIM_OUTPUT --> REFINEMENT[🔄 Refinement Needed]
    
    style SIM_ENGINE fill:#5b9bff,stroke:#8bc1ff,stroke-width:3px,color:#fff
    style CODEGEN fill:#3adba6,stroke:#2dd4bf,stroke-width:2px,color:#fff
    style REFINEMENT fill:#ffb347,stroke:#fb923c,stroke-width:2px,color:#fff
        </div>
      </div>
      
      <div class="inline-link-block">
        <a href="WHITEPAPER_REVISED.md" target="_blank" rel="noopener">📖 Read Complete Technical Details →</a>
        <a href="DSL_GRAMMAR_REFERENCE.md" target="_blank" rel="noopener">⚙️ Explore DSL Grammar →</a>
      </div>
    </section>

    <section id="differentiation">
      <h2>Differentiation<a class="anchor-link" href="#differentiation">§</a></h2>
      <p>Low/no‑code tools accelerate surface assembly; raw AI codegen is fast but volatile. We provide a <em>governed semantic execution layer</em> with persistent IR and simulation.</p>
      <div class="table-wrap">
        <table>
          <thead><tr><th>Dimension</th><th>Low/No‑Code</th><th>Raw AI Codegen</th><th>This Platform</th></tr></thead>
          <tbody>
            <tr><td>Domain Capture</td><td>Shallow forms</td><td>Implicit prompts</td><td>10‑level KnowledgeMap</td></tr>
            <tr><td>Intermediate Representation</td><td>Opaque / absent</td><td>None</td><td>Portable S‑IR DSL</td></tr>
            <tr><td>Determinism</td><td>UI-bound</td><td>Stochastic</td><td>Contracts + Grammar</td></tr>
            <tr><td>Multi-Modal Fusion</td><td>Limited</td><td>Unstructured</td><td>AI + Data + IoT + Analytics + UX + Agents</td></tr>
            <tr><td>Behavioral Testing</td><td>Post-build</td><td>Manual</td><td>Pre-emission simulation</td></tr>
            <tr><td>Regeneration</td><td>Manual rebuild</td><td>Risky</td><td>Incremental & partial</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <section id="knowledge-map">
      <h2>KnowledgeMap<a class="anchor-link" href="#knowledge-map">§</a></h2>
      <p>A 10‑level semantic domain graph combining hierarchical depth with relational edges (dependency, compositional, causal, associative). Enrichment adds KPIs, roles, risks, and glossary metadata while <strong>Autofix</strong> repairs structural hygiene (orphan removal, type normalization).</p>
      <p><strong>Value:</strong> Persistent substrate enabling multiple future DSLs (operational, analytics, IoT, agent collaboration) without re-capturing the domain.</p>
    </section>

    <section id="contracts">
      <h2>Canonical Contracts<a class="anchor-link" href="#contracts">§</a></h2>
      <div class="grid cols-3">
        <div class="card"><h4>Entities</h4><p class="muted">Durable domain shapes for modeling & storage.</p></div>
        <div class="card"><h4>Events</h4><p class="muted">Lifecycle & state transition signals.</p></div>
        <div class="card"><h4>APIs</h4><p class="muted">Interaction boundaries (OpenAPI/GraphQL planned).</p></div>
        <div class="card"><h4>State Machines</h4><p class="muted">Bounded context lifecycles gating flows.</p></div>
        <div class="card"><h4>Token Intelligence</h4><p class="muted">Weighted semantic vocabulary to constrain AI variance.</p></div>
        <div class="card"><h4>Alignment Spine</h4><p class="muted">Contracts shrink hallucination window & enable partial rebuilds.</p></div>
      </div>
    </section>

    <section id="dsl">
      <h2>Executable DSL (S‑IR)<a class="anchor-link" href="#dsl">§</a></h2>
      <p>The portable semantic intermediate representation consumed by interpreter & transpilers. Grammar spans orchestration (<code>AGENT</code>, <code>CALL</code>), interaction (<code>IN</code>, <code>CHOICE</code>, <code>FORM</code>), data modeling (<code>SCHEMA</code>, <code>TABLE</code>), AI reasoning (<code>PROMPT</code>, <code>GENERATE</code>), analytics (<code>ANALYZE</code>), IoT (<code>SENSE</code>, <code>ACTUATE</code>), and integration (<code>FETCH</code>, <code>READ</code>, <code>WRITE</code>).</p>
      <div class="inline-link-block">
        <a href="pitch-decks/DSL_GRAMMAR_REFERENCE.md" target="_blank" rel="noopener">Full Grammar Reference →</a>
      </div>
    </section>

    <section id="multi-dsl">
      <h2>Multi‑DSL Layering<a class="anchor-link" href="#multi-dsl">§</a></h2>
      <p>Generate layered DSLs from one KnowledgeMap + Contracts: Operational, Analytics, IoT Automation, Agent Collaboration, and vertical packs. All share lineage—updates propagate deterministically.</p>
    </section>

    <section id="interpreter">
      <h2>Simulation & Interpreter<a class="anchor-link" href="#interpreter">§</a></h2>
      <p>Shift‑left validation executes DSL behavior before code emission. Features include statement handlers, scoped variables per agent, layered prompt assembly, breakpoints (planned), and traceable execution paths.</p>
      <p class="muted">Outcome: Early detection of orchestration flaws & integration gaps.</p>
    </section>

    <section id="codegen">
      <h2>Deterministic Code Generation<a class="anchor-link" href="#codegen">§</a></h2>
      <div class="grid cols-4">
        <div class="card"><h4>TypeScript</h4><p class="muted">Agent orchestration & logic scaffolds.</p></div>
        <div class="card"><h4>Dart / Flutter</h4><p class="muted">Reactive data models & state.</p></div>
        <div class="card"><h4>C# / Semantic Kernel</h4><p class="muted">Orchestration + wizard HTML.</p></div>
        <div class="card"><h4>HTML Wizard</h4><p class="muted">Interactive multi-step UI.</p></div>
      </div>
      <p class="muted">Planned: OpenAPI, GraphQL, workflow YAML, additional backends.</p>
    </section>

    <section id="governance">
      <h2>Governance & Policy<a class="anchor-link" href="#governance">§</a></h2>
      <p>Environment and statement-family aware policies (e.g., restrict <code>ACTUATE</code> in prod, cap <code>GENERATE</code> tokens in regulated sectors). Enforcement phases: pre-interpretation lint, runtime guard, transpiler omission/stubbing.</p>
      <pre><code>policies:
  - id: restrict-actuation-production
    match: { environment: prod, statements: [ACTUATE] }
    action: review
  - id: block-unbounded-generate
    match: { environment: regulated, statements: [GENERATE] }
    constraints: { maxTokens: 400, creativity: Focused }
    action: allow</code></pre>
    </section>

    <section id="security">
      <h2>Security & Data Isolation<a class="anchor-link" href="#security">§</a></h2>
      <p>Principles: minimize semantic layer exposure, pluggable providers, reproducibility without data leakage. Techniques: redacted prompt archives, scoped vector stores, runtime sandboxing, secret indirection, provenance stamping.</p>
    </section>

    <section id="metrics">
      <h2>Metrics & KPIs<a class="anchor-link" href="#metrics">§</a></h2>
      <div class="table-wrap">
        <table>
          <thead><tr><th>Metric</th><th>Signal</th><th>Early (Placeholder)</th><th>12‑mo Target</th></tr></thead>
          <tbody>
            <tr><td>Domain Capture Velocity</td><td>Acceleration</td><td>18 min</td><td>&lt; 10 min</td></tr>
            <tr><td>Contract Density</td><td>Extraction Quality</td><td>0.42</td><td>&gt; 0.55</td></tr>
            <tr><td>Entropy Reduction</td><td>Reliability</td><td>-37%</td><td>-55%</td></tr>
            <tr><td>Regeneration Latency (full)</td><td>Iteration Speed</td><td>90s</td><td>&lt; 45s</td></tr>
            <tr><td>Regeneration Latency (partial)</td><td>Incremental Build</td><td>—</td><td>&lt; 20s</td></tr>
            <tr><td>Heuristic Accuracy</td><td>First Draft Acceptance</td><td>68%</td><td>85%</td></tr>
            <tr><td>Simulation Adoption</td><td>Quality Discipline</td><td>62%</td><td>90%</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <section id="dsl-examples">
      <h2>DSL Examples<a class="anchor-link" href="#dsl-examples">§</a></h2>
      <h3>Energy Optimizer</h3>
      <pre><code>PLAN "Energy Optimizer"
  SENSE meter.reading EVERY 5m
  ANALYZE usage TREND 24h
  IF usage &gt; threshold THEN
    GENERATE "Suggest savings"
  END
END</code></pre>
      <h3>Maintenance Orchestrator</h3>
      <pre><code>PLAN "Maintenance Orchestrator"
  SCHEMA Pump(id, model, hoursRun, vibrationIndex)
  SENSE pumpSensor.vibration EVERY 10m
  ANALYZE vibrationIndex TREND 7d
  IF vibrationIndex &gt; threshold THEN
    EVENT "FailureDetected"
    GENERATE "Draft technician work order"
    CALL "EscalationAgent"
  END
END</code></pre>
      <p class="muted">See whitepaper narrative for full end‑to‑end scenario.</p>
    </section>

    <section id="cta">
      <div class="cta-panel">
        <h2>Ready to Compile Domain Knowledge?</h2>
        <p>Adopt the semantic synthesis layer early to institutionalize domain intelligence and enable safe, deterministic regeneration across evolving stacks.</p>
  <div class="cta-row margin-top">
          <a class="btn" href="WHITEPAPER_REVISED.md" target="_blank" rel="noopener">Read Full Whitepaper</a>
          <a class="btn secondary" href="DSL_GRAMMAR_REFERENCE.md" target="_blank" rel="noopener">Explore DSL Grammar</a>
        </div>
  <p class="note-muted">Next: integrate telemetry + partial regeneration engine; request early access channel.</p>
      </div>
    </section>
  </main>
  <footer>
    <p><strong>Semantic Domain‑to‑Code Compiler</strong> – A governed semantic synthesis and regeneration layer.</p>
    <p>Artifacts: <a href="WHITEPAPER_REVISED.md">Whitepaper</a> • <a href="DSL_GRAMMAR_REFERENCE.md">Grammar Reference</a></p>
    <p>&copy; <span id="year"></span> Semantic Synthesis Platform. All rights reserved.</p>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
  <script>
    // Initialize mermaid with proper configuration
    mermaid.initialize({ 
      startOnLoad: true, 
      theme: 'dark',
      flowchart: {
        useMaxWidth: true,
        htmlLabels: true,
        curve: 'basis',
        padding: 20,
        nodeSpacing: 50,
        rankSpacing: 80
      },
      graph: {
        useMaxWidth: true,
        htmlLabels: true,
        curve: 'basis'
      },
      themeVariables: {
        primaryColor: '#5b9bff',
        primaryTextColor: '#ffffff',
        primaryBorderColor: '#8bc1ff',
        lineColor: '#96a3b6',
        sectionBkgColor: '#1b1f27',
        altSectionBkgColor: '#242a33',
        gridColor: '#96a3b6',
        secondaryColor: '#3adba6',
        tertiaryColor: '#242a33',
        background: 'transparent',
        mainBkg: '#5b9bff',
        secondBkg: '#3adba6',
        tertiaryBkg: '#ff4772',
        primaryBorderColor: '#8bc1ff',
        primaryTextColor: '#ffffff',
        fontFamily: 'system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif',
        fontSize: '14px',
        darkMode: true,
        edgeLabelBackground: 'transparent'
      },
      secure: ['secure', 'securityLevel', 'startOnLoad', 'maxTextSize'],
      fontSize: 14
    });
    
    // Theme toggle with improved transitions
    const themeBtn = document.getElementById('themeToggle');
    const storedTheme = localStorage.getItem('sdcc-theme');
    if (storedTheme === 'light') { 
      document.body.classList.add('theme-light'); 
      themeBtn.textContent = 'DARK'; 
    }
    themeBtn.addEventListener('click', () => {
      const light = document.body.classList.toggle('theme-light');
      themeBtn.textContent = light ? 'DARK' : 'LIGHT';
      localStorage.setItem('sdcc-theme', light ? 'light' : 'dark');
      
      // Reinitialize mermaid with new theme
      try { 
        mermaid.initialize({ 
          startOnLoad: false, 
          theme: light ? 'default' : 'dark',
          flowchart: {
            useMaxWidth: true,
            htmlLabels: true,
            curve: 'basis',
            padding: 20,
            nodeSpacing: 50,
            rankSpacing: 80
          },
          graph: {
            useMaxWidth: true,
            htmlLabels: true,
            curve: 'basis'
          },
          themeVariables: light ? {
            primaryColor: '#2563eb',
            primaryTextColor: '#ffffff',
            primaryBorderColor: '#1d4ed8',
            lineColor: '#64748b',
            sectionBkgColor: '#f1f5f9',
            altSectionBkgColor: '#ffffff',
            gridColor: '#64748b',
            secondaryColor: '#059669',
            tertiaryColor: '#f8fafc',
            background: 'transparent',
            mainBkg: '#2563eb',
            secondBkg: '#059669',
            tertiaryBkg: '#dc2626',
            fontFamily: 'system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif',
            fontSize: '14px',
            darkMode: false,
            edgeLabelBackground: 'transparent'
          } : {
            primaryColor: '#5b9bff',
            primaryTextColor: '#ffffff',
            primaryBorderColor: '#8bc1ff',
            lineColor: '#96a3b6',
            sectionBkgColor: '#1b1f27',
            altSectionBkgColor: '#242a33',
            gridColor: '#96a3b6',
            secondaryColor: '#3adba6',
            tertiaryColor: '#242a33',
            background: 'transparent',
            mainBkg: '#5b9bff',
            secondBkg: '#3adba6',
            tertiaryBkg: '#ff4772',
            fontFamily: 'system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif',
            fontSize: '14px',
            darkMode: true,
            edgeLabelBackground: 'transparent'
          }
        }); 
        // Re-render all mermaid diagrams
        document.querySelectorAll('.mermaid').forEach(element => {
          element.removeAttribute('data-processed');
        });
        mermaid.run(); 
      } catch(e) {
        console.log('Mermaid reinitialization failed:', e);
      }
    });

    // Enhanced scroll spy with smooth active transitions
    const navLinks = Array.from(document.querySelectorAll('nav a[href^="#"]'));
    const sections = navLinks.map(l => document.querySelector(l.getAttribute('href'))).filter(Boolean);
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const id = '#' + entry.target.id;
          navLinks.forEach(a => {
            const isActive = a.getAttribute('href') === id;
            a.classList.toggle('active', isActive);
            if (isActive) {
              a.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
            }
          });
        }
      });
    }, { root:null, rootMargin:'0px 0px -70% 0px', threshold:0.1 });
    sections.forEach(s => observer.observe(s));

    // Smooth scrolling for anchor links
    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = link.getAttribute('href');
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          const offsetTop = targetElement.offsetTop - 100; // Account for sticky nav
          window.scrollTo({
            top: offsetTop,
            behavior: 'smooth'
          });
          // Update URL without scrolling
          setTimeout(() => {
            history.pushState(null, null, targetId);
          }, 100);
        }
      });
    });

    // Enhanced copy buttons with better feedback
    function addCopyButtons(){
      document.querySelectorAll('pre > code').forEach(code => {
        const pre = code.parentElement;
        if (pre.classList.contains('copy-added')) return;
        pre.classList.add('copy-added');
        const btn = document.createElement('button');
        btn.textContent = 'COPY';
        btn.setAttribute('aria-label','Copy code');
        Object.assign(btn.style,{
          position:'absolute',
          top:'8px',
          right:'8px',
          background:'var(--panel-alt)',
          color:'var(--text)',
          border:'1px solid rgba(255,255,255,.2)',
          padding:'.5rem .8rem',
          fontSize:'.7rem',
          letterSpacing:'.5px',
          borderRadius:'.5rem',
          cursor:'pointer',
          fontWeight:'600',
          transition:'all .2s ease'
        });
        btn.addEventListener('mouseover', () => {
          btn.style.background = 'var(--accent)';
          btn.style.color = '#ffffff';
          btn.style.transform = 'translateY(-1px)';
        });
        btn.addEventListener('mouseout', () => {
          if (btn.textContent === 'COPY') {
            btn.style.background = 'var(--panel-alt)';
            btn.style.color = 'var(--text)';
            btn.style.transform = 'translateY(0)';
          }
        });
        btn.addEventListener('click',()=>{
          navigator.clipboard.writeText(code.textContent).then(()=>{
            btn.textContent='COPIED'; 
            btn.style.background='var(--ok)';
            btn.style.color='#ffffff';
            setTimeout(()=>{
              btn.textContent='COPY';
              btn.style.background='var(--panel-alt)';
              btn.style.color='var(--text)';
            },2000);
          });
        });
        pre.style.position='relative';
        pre.appendChild(btn);
      });
    }
    
    // Initialize copy buttons
    addCopyButtons();
    
    // Force mermaid to render on page load
    document.addEventListener('DOMContentLoaded', function() {
      mermaid.run();
      
      // Add diagram interaction enhancements
      setTimeout(() => {
        document.querySelectorAll('.diagram-container').forEach(container => {
          // Add hover effects to diagram containers
          container.addEventListener('mouseenter', () => {
            container.style.transform = 'translateY(-2px)';
            container.style.boxShadow = 'var(--shadow-hover)';
          });
          
          container.addEventListener('mouseleave', () => {
            container.style.transform = 'translateY(0)';
            container.style.boxShadow = 'var(--shadow)';
          });
          
          // Add click to expand functionality for mobile
          if (window.innerWidth <= 768) {
            const mermaidEl = container.querySelector('.mermaid');
            if (mermaidEl) {
              container.style.cursor = 'pointer';
              container.addEventListener('click', () => {
                mermaidEl.style.transform = mermaidEl.style.transform === 'scale(1.2)' ? 'scale(1)' : 'scale(1.2)';
                mermaidEl.style.transition = 'transform 0.3s ease';
              });
            }
          }
        });
      }, 1000);
    });

    // Keyboard navigation support
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        // Remove focus from any focused element
        document.activeElement.blur();
      }
    });

    // Add loading animation for external links
    document.querySelectorAll('a[target="_blank"]').forEach(link => {
      link.addEventListener('click', (e) => {
        const originalText = link.textContent;
        link.style.opacity = '0.7';
        setTimeout(() => {
          link.style.opacity = '1';
        }, 500);
      });
    });

    // Set current year
    document.getElementById('year').textContent = new Date().getFullYear();
    
    // Add parallax effect to header (optional enhancement)
    window.addEventListener('scroll', () => {
      const scrolled = window.pageYOffset;
      const header = document.querySelector('header');
      if (header && scrolled < window.innerHeight) {
        header.style.transform = `translateY(${scrolled * 0.3}px)`;
      }
    });
  </script>
</body>
</html>