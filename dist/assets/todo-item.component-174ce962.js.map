{"version":3,"file":"todo-item.component-174ce962.js","sources":["../../src/components/windows/todo-item.component.ts"],"sourcesContent":["/**\r\n * Todo Item Web Component\r\n * A component for displaying and managing individual todo items\r\n * Demonstrates Web Component state management and event handling\r\n */\r\n\r\nimport { eventBus } from '../../core/events/event-bus.js';\r\n\r\nexport interface TodoItem {\r\n  id: string;\r\n  text: string;\r\n  completed: boolean;\r\n  priority: 'low' | 'medium' | 'high';\r\n  createdAt: Date;\r\n  completedAt?: Date;\r\n}\r\n\r\nexport class TodoItemComponent extends HTMLElement {\r\n  private shadow: ShadowRoot;\r\n  private todo: TodoItem | null = null;\r\n\r\n  constructor() {\r\n    super();\r\n    this.shadow = this.attachShadow({ mode: 'open' });\r\n    this.render();\r\n    this.setupEventListeners();\r\n  }\r\n\r\n  /**\r\n   * Component connected to DOM\r\n   */\r\n  connectedCallback(): void {\r\n    console.log('Todo Item Web Component connected');\r\n  }\r\n\r\n  /**\r\n   * Component disconnected from DOM\r\n   */\r\n  disconnectedCallback(): void {\r\n    console.log('Todo Item Web Component disconnected');\r\n  }\r\n\r\n  /**\r\n   * Observed attributes\r\n   */\r\n  static get observedAttributes(): string[] {\r\n    return ['todo-id', 'text', 'completed', 'priority'];\r\n  }\r\n\r\n  /**\r\n   * Attribute changed callback\r\n   */\r\n  attributeChangedCallback(name: string, oldValue: string, newValue: string): void {\r\n    if (oldValue !== newValue) {\r\n      this.updateTodoFromAttributes();\r\n      this.render();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the todo data\r\n   */\r\n  setTodo(todo: TodoItem): void {\r\n    this.todo = todo;\r\n    this.updateAttributes();\r\n    this.render();\r\n  }\r\n\r\n  /**\r\n   * Update attributes from todo data\r\n   */\r\n  private updateAttributes(): void {\r\n    if (!this.todo) return;\r\n\r\n    this.setAttribute('todo-id', this.todo.id);\r\n    this.setAttribute('text', this.todo.text);\r\n    this.setAttribute('completed', this.todo.completed.toString());\r\n    this.setAttribute('priority', this.todo.priority);\r\n  }\r\n\r\n  /**\r\n   * Update todo from attributes\r\n   */\r\n  private updateTodoFromAttributes(): void {\r\n    const id = this.getAttribute('todo-id');\r\n    const text = this.getAttribute('text') || '';\r\n    const completed = this.getAttribute('completed') === 'true';\r\n    const priority = (this.getAttribute('priority') as 'low' | 'medium' | 'high') || 'medium';\r\n\r\n    if (id) {\r\n      this.todo = {\r\n        id,\r\n        text,\r\n        completed,\r\n        priority,\r\n        createdAt: new Date(), // This would be passed in real implementation\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render the component\r\n   */\r\n  private render(): void {\r\n    if (!this.todo) {\r\n      this.shadow.innerHTML = '<div class=\"todo-item loading\">Loading...</div>';\r\n      return;\r\n    }\r\n\r\n    const styles = this.getStyles();\r\n    const template = this.getTemplate();\r\n    this.shadow.innerHTML = '<style>' + styles + '</style>' + template;\r\n  }\r\n\r\n  /**\r\n   * Get component styles\r\n   */\r\n  private getStyles(): string {\r\n    if (!this.todo) return '';\r\n\r\n    const priorityColors = {\r\n      low: '#28a745',\r\n      medium: '#ffc107',\r\n      high: '#dc3545'\r\n    };\r\n\r\n    const color = priorityColors[this.todo.priority];\r\n\r\n    return [\r\n      ':host { display: block; margin-bottom: 8px; }',\r\n      '.todo-item {',\r\n      '  display: flex;',\r\n      '  align-items: center;',\r\n      '  padding: 12px 16px;',\r\n      '  background: white;',\r\n      '  border-radius: 8px;',\r\n      '  box-shadow: 0 1px 3px rgba(0,0,0,0.1);',\r\n      '  border-left: 4px solid ' + color + ';',\r\n      '  transition: all 0.2s ease;',\r\n      '  cursor: pointer;',\r\n      '}',\r\n      '.todo-item:hover {',\r\n      '  box-shadow: 0 2px 8px rgba(0,0,0,0.15);',\r\n      '  transform: translateY(-1px);',\r\n      '}',\r\n      '.todo-item.completed {',\r\n      '  opacity: 0.6;',\r\n      '  background: #f8f9fa;',\r\n      '}',\r\n      '.todo-item.completed .todo-text {',\r\n      '  text-decoration: line-through;',\r\n      '  color: #6c757d;',\r\n      '}',\r\n      '.checkbox {',\r\n      '  width: 5px;',\r\n      '  height: 5px;',\r\n      '  margin-right: 12px;',\r\n      '  border: 2px solid #ddd;',\r\n      '  border-radius: 4px;',\r\n      '  background: white;',\r\n      '  cursor: pointer;',\r\n      '  display: flex;',\r\n      '  align-items: center;',\r\n      '  justify-content: center;',\r\n      '  transition: all 0.2s;',\r\n      '  flex-shrink: 0;',\r\n      '}',\r\n      '.checkbox:hover {',\r\n      '  border-color: ' + color + ';',\r\n      '}',\r\n      '.checkbox.checked {',\r\n      '  background: ' + color + ';',\r\n      '  border-color: ' + color + ';',\r\n      '}',\r\n      '.checkbox.checked::after {',\r\n      '  content: \"‚úì\";',\r\n      '  color: white;',\r\n      '  font-size: 12px;',\r\n      '  font-weight: bold;',\r\n      '}',\r\n      '.todo-content {',\r\n      '  flex: 1;',\r\n      '  min-width: 0;',\r\n      '}',\r\n      '.todo-text {',\r\n      '  font-size: 14px;',\r\n      '  line-height: 1.4;',\r\n      '  color: #333;',\r\n      '  word-wrap: break-word;',\r\n      '  margin: 0;',\r\n      '}',\r\n      '.todo-meta {',\r\n      '  display: flex;',\r\n      '  align-items: center;',\r\n      '  gap: 8px;',\r\n      '  margin-top: 4px;',\r\n      '}',\r\n      '.priority-badge {',\r\n      '  padding: 2px 8px;',\r\n      '  border-radius: 12px;',\r\n      '  font-size: 11px;',\r\n      '  font-weight: 500;',\r\n      '  text-transform: uppercase;',\r\n      '  letter-spacing: 0.5px;',\r\n      '}',\r\n      '.priority-low { background: rgba(40, 167, 69, 0.1); color: #28a745; }',\r\n      '.priority-medium { background: rgba(255, 193, 7, 0.1); color: #ffc107; }',\r\n      '.priority-high { background: rgba(220, 53, 69, 0.1); color: #dc3545; }',\r\n      '.todo-date {',\r\n      '  font-size: 11px;',\r\n      '  color: #6c757d;',\r\n      '}',\r\n      '.actions {',\r\n      '  display: flex;',\r\n      '  gap: 4px;',\r\n      '  opacity: 0;',\r\n      '  transition: opacity 0.2s;',\r\n      '}',\r\n      '.todo-item:hover .actions {',\r\n      '  opacity: 1;',\r\n      '}',\r\n      '.action-btn {',\r\n      '  padding: 4px 8px;',\r\n      '  border: none;',\r\n      '  border-radius: 4px;',\r\n      '  font-size: 12px;',\r\n      '  cursor: pointer;',\r\n      '  transition: all 0.2s;',\r\n      '  background: transparent;',\r\n      '}',\r\n      '.edit-btn {',\r\n      '  color: #007acc;',\r\n      '}',\r\n      '.edit-btn:hover {',\r\n      '  background: rgba(0, 122, 204, 0.1);',\r\n      '}',\r\n      '.delete-btn {',\r\n      '  color: #dc3545;',\r\n      '}',\r\n      '.delete-btn:hover {',\r\n      '  background: rgba(220, 53, 69, 0.1);',\r\n      '}',\r\n      '.editing .todo-text {',\r\n      '  display: none;',\r\n      '}',\r\n      '.editing .edit-input {',\r\n      '  display: block;',\r\n      '}',\r\n      '.edit-input {',\r\n      '  display: none;',\r\n      '  width: 100%;',\r\n      '  padding: 4px 8px;',\r\n      '  border: 1px solid #ddd;',\r\n      '  border-radius: 4px;',\r\n      '  font-size: 14px;',\r\n      '  margin-top: 4px;',\r\n      '}',\r\n      '.edit-input:focus {',\r\n      '  outline: none;',\r\n      '  border-color: #007acc;',\r\n      '  box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.2);',\r\n      '}',\r\n      '@keyframes fadeIn {',\r\n      '  from { opacity: 0; transform: translateY(10px); }',\r\n      '  to { opacity: 1; transform: translateY(0); }',\r\n      '}',\r\n      '.todo-item {',\r\n      '  animation: fadeIn 0.3s ease-out;',\r\n      '}'\r\n    ].join(' ');\r\n  }\r\n\r\n  /**\r\n   * Get component template\r\n   */\r\n  private getTemplate(): string {\r\n    if (!this.todo) return '';\r\n\r\n    const completedClass = this.todo.completed ? 'completed' : '';\r\n    const priorityClass = `priority-${this.todo.priority}`;\r\n    const dateStr = this.formatDate(this.todo.createdAt);\r\n\r\n    return '<div class=\"todo-item ' + completedClass + '\">' +\r\n           '<div class=\"checkbox ' + (this.todo.completed ? 'checked' : '') + '\"></div>' +\r\n           '<div class=\"todo-content\">' +\r\n           '<p class=\"todo-text\">' + this.escapeHtml(this.todo.text) + '</p>' +\r\n           '<input type=\"text\" class=\"edit-input\" value=\"' + this.escapeHtml(this.todo.text) + '\" />' +\r\n           '<div class=\"todo-meta\">' +\r\n           '<span class=\"priority-badge ' + priorityClass + '\">' + this.todo.priority + '</span>' +\r\n           '<span class=\"todo-date\">Created ' + dateStr + '</span>' +\r\n           '</div>' +\r\n           '</div>' +\r\n           '<div class=\"actions\">' +\r\n           '<button class=\"action-btn edit-btn\">‚úèÔ∏è</button>' +\r\n           '<button class=\"action-btn delete-btn\">üóëÔ∏è</button>' +\r\n           '</div>' +\r\n           '</div>';\r\n  }\r\n\r\n  /**\r\n   * Setup event listeners\r\n   */\r\n  private setupEventListeners(): void {\r\n    // Use event delegation since content is re-rendered\r\n    this.shadow.addEventListener('click', (e) => {\r\n      const target = e.target as HTMLElement;\r\n\r\n      if (target.classList.contains('checkbox')) {\r\n        this.toggleCompleted();\r\n      } else if (target.classList.contains('edit-btn')) {\r\n        this.startEditing();\r\n      } else if (target.classList.contains('delete-btn')) {\r\n        this.deleteTodo();\r\n      } else if (target.closest('.todo-item') && !target.closest('.actions') && !target.classList.contains('edit-input')) {\r\n        this.toggleCompleted();\r\n      }\r\n    });\r\n\r\n    this.shadow.addEventListener('keydown', (e) => {\r\n      const event = e as KeyboardEvent;\r\n      if (event.target && (event.target as HTMLElement).classList.contains('edit-input')) {\r\n        const input = event.target as HTMLInputElement;\r\n\r\n        if (event.key === 'Enter') {\r\n          this.finishEditing(input.value.trim());\r\n        } else if (event.key === 'Escape') {\r\n          this.cancelEditing();\r\n        }\r\n      }\r\n    });\r\n\r\n    this.shadow.addEventListener('blur', (e) => {\r\n      if (e.target && (e.target as HTMLElement).classList.contains('edit-input')) {\r\n        const input = e.target as HTMLInputElement;\r\n        this.finishEditing(input.value.trim());\r\n      }\r\n    }, true);\r\n  }\r\n\r\n  /**\r\n   * Toggle completed state\r\n   */\r\n  private toggleCompleted(): void {\r\n    if (!this.todo) return;\r\n\r\n    eventBus.emit('todo:toggle', { id: this.todo.id });\r\n  }\r\n\r\n  /**\r\n   * Start editing mode\r\n   */\r\n  private startEditing(): void {\r\n    const todoItem = this.shadow.querySelector('.todo-item');\r\n    const editInput = this.shadow.querySelector('.edit-input') as HTMLInputElement;\r\n\r\n    if (todoItem && editInput) {\r\n      todoItem.classList.add('editing');\r\n      editInput.focus();\r\n      editInput.select();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Finish editing\r\n   */\r\n  private finishEditing(newText: string): void {\r\n    if (!this.todo || !newText.trim()) {\r\n      this.cancelEditing();\r\n      return;\r\n    }\r\n\r\n    eventBus.emit('todo:edit', { id: this.todo.id, text: newText.trim() });\r\n    this.cancelEditing();\r\n  }\r\n\r\n  /**\r\n   * Cancel editing\r\n   */\r\n  private cancelEditing(): void {\r\n    const todoItem = this.shadow.querySelector('.todo-item');\r\n    const editInput = this.shadow.querySelector('.edit-input') as HTMLInputElement;\r\n\r\n    if (todoItem && editInput) {\r\n      todoItem.classList.remove('editing');\r\n      editInput.value = this.todo?.text || '';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete todo\r\n   */\r\n  private deleteTodo(): void {\r\n    if (!this.todo) return;\r\n\r\n    if (confirm('Are you sure you want to delete this todo?')) {\r\n      eventBus.emit('todo:delete', { id: this.todo.id });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Format date for display\r\n   */\r\n  private formatDate(date: Date): string {\r\n    const now = new Date();\r\n    const diff = now.getTime() - date.getTime();\r\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\r\n\r\n    if (days === 0) {\r\n      return 'today';\r\n    } else if (days === 1) {\r\n      return 'yesterday';\r\n    } else if (days < 7) {\r\n      return `${days} days ago`;\r\n    } else {\r\n      return date.toLocaleDateString();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Escape HTML for security\r\n   */\r\n  private escapeHtml(text: string): string {\r\n    const div = document.createElement('div');\r\n    div.textContent = text;\r\n    return div.innerHTML;\r\n  }\r\n}\r\n\r\n// Register the Web Component\r\ncustomElements.define('vfs-todo-item', TodoItemComponent);"],"names":["TodoItemComponent","name","oldValue","newValue","todo","id","text","completed","priority","styles","template","color","completedClass","priorityClass","dateStr","target","event","input","eventBus","todoItem","editInput","newText","date","diff","days","div"],"mappings":"uCAiBO,MAAMA,UAA0B,WAAY,CACzC,OACA,KAAwB,KAEhC,aAAc,CACN,QACN,KAAK,OAAS,KAAK,aAAa,CAAE,KAAM,OAAQ,EAChD,KAAK,OAAO,EACZ,KAAK,oBAAoB,CAC3B,CAKA,mBAA0B,CACxB,QAAQ,IAAI,mCAAmC,CACjD,CAKA,sBAA6B,CAC3B,QAAQ,IAAI,sCAAsC,CACpD,CAKA,WAAW,oBAA+B,CACxC,MAAO,CAAC,UAAW,OAAQ,YAAa,UAAU,CACpD,CAKA,yBAAyBC,EAAcC,EAAkBC,EAAwB,CAC3ED,IAAaC,IACf,KAAK,yBAAyB,EAC9B,KAAK,OAAO,EAEhB,CAKA,QAAQC,EAAsB,CAC5B,KAAK,KAAOA,EACZ,KAAK,iBAAiB,EACtB,KAAK,OAAO,CACd,CAKQ,kBAAyB,CAC1B,KAAK,OAEV,KAAK,aAAa,UAAW,KAAK,KAAK,EAAE,EACzC,KAAK,aAAa,OAAQ,KAAK,KAAK,IAAI,EACxC,KAAK,aAAa,YAAa,KAAK,KAAK,UAAU,UAAU,EAC7D,KAAK,aAAa,WAAY,KAAK,KAAK,QAAQ,EAClD,CAKQ,0BAAiC,CACjC,MAAAC,EAAK,KAAK,aAAa,SAAS,EAChCC,EAAO,KAAK,aAAa,MAAM,GAAK,GACpCC,EAAY,KAAK,aAAa,WAAW,IAAM,OAC/CC,EAAY,KAAK,aAAa,UAAU,GAAmC,SAE7EH,IACF,KAAK,KAAO,CACV,GAAAA,EACA,KAAAC,EACA,UAAAC,EACA,SAAAC,EACA,cAAe,IAAK,EAG1B,CAKQ,QAAe,CACjB,GAAA,CAAC,KAAK,KAAM,CACd,KAAK,OAAO,UAAY,kDACxB,MACF,CAEM,MAAAC,EAAS,KAAK,YACdC,EAAW,KAAK,cACtB,KAAK,OAAO,UAAY,UAAYD,EAAS,WAAaC,CAC5D,CAKQ,WAAoB,CAC1B,GAAI,CAAC,KAAK,KAAa,MAAA,GAQvB,MAAMC,EANiB,CACrB,IAAK,UACL,OAAQ,UACR,KAAM,SAAA,EAGqB,KAAK,KAAK,QAAQ,EAExC,MAAA,CACL,gDACA,eACA,mBACA,yBACA,wBACA,uBACA,wBACA,2CACA,4BAA8BA,EAAQ,IACtC,+BACA,qBACA,IACA,qBACA,4CACA,iCACA,IACA,yBACA,kBACA,yBACA,IACA,oCACA,mCACA,oBACA,IACA,cACA,gBACA,iBACA,wBACA,4BACA,wBACA,uBACA,qBACA,mBACA,yBACA,6BACA,0BACA,oBACA,IACA,oBACA,mBAAqBA,EAAQ,IAC7B,IACA,sBACA,iBAAmBA,EAAQ,IAC3B,mBAAqBA,EAAQ,IAC7B,IACA,6BACA,kBACA,kBACA,qBACA,uBACA,IACA,kBACA,aACA,kBACA,IACA,eACA,qBACA,sBACA,iBACA,2BACA,eACA,IACA,eACA,mBACA,yBACA,cACA,qBACA,IACA,oBACA,sBACA,yBACA,qBACA,sBACA,+BACA,2BACA,IACA,wEACA,2EACA,yEACA,eACA,qBACA,oBACA,IACA,aACA,mBACA,cACA,gBACA,8BACA,IACA,8BACA,gBACA,IACA,gBACA,sBACA,kBACA,wBACA,qBACA,qBACA,0BACA,6BACA,IACA,cACA,oBACA,IACA,oBACA,wCACA,IACA,gBACA,oBACA,IACA,sBACA,wCACA,IACA,wBACA,mBACA,IACA,yBACA,oBACA,IACA,gBACA,mBACA,iBACA,sBACA,4BACA,wBACA,qBACA,qBACA,IACA,sBACA,mBACA,2BACA,kDACA,IACA,sBACA,sDACA,iDACA,IACA,eACA,qCACA,GAAA,EACA,KAAK,GAAG,CACZ,CAKQ,aAAsB,CAC5B,GAAI,CAAC,KAAK,KAAa,MAAA,GAEvB,MAAMC,EAAiB,KAAK,KAAK,UAAY,YAAc,GACrDC,EAAgB,YAAY,KAAK,KAAK,QAAQ,GAC9CC,EAAU,KAAK,WAAW,KAAK,KAAK,SAAS,EAEnD,MAAO,yBAA2BF,EAAiB,2BACjB,KAAK,KAAK,UAAY,UAAY,IAAM,0DAEzC,KAAK,WAAW,KAAK,KAAK,IAAI,EAAI,oDACV,KAAK,WAAW,KAAK,KAAK,IAAI,EAAI,0DAEnDC,EAAgB,KAAO,KAAK,KAAK,SAAW,0CACxCC,EAAU,uJAQxD,CAKQ,qBAA4B,CAElC,KAAK,OAAO,iBAAiB,QAAU,GAAM,CAC3C,MAAMC,EAAS,EAAE,OAEbA,EAAO,UAAU,SAAS,UAAU,EACtC,KAAK,gBAAgB,EACZA,EAAO,UAAU,SAAS,UAAU,EAC7C,KAAK,aAAa,EACTA,EAAO,UAAU,SAAS,YAAY,EAC/C,KAAK,WAAW,EACPA,EAAO,QAAQ,YAAY,GAAK,CAACA,EAAO,QAAQ,UAAU,GAAK,CAACA,EAAO,UAAU,SAAS,YAAY,GAC/G,KAAK,gBAAgB,CACvB,CACD,EAED,KAAK,OAAO,iBAAiB,UAAY,GAAM,CAC7C,MAAMC,EAAQ,EACd,GAAIA,EAAM,QAAWA,EAAM,OAAuB,UAAU,SAAS,YAAY,EAAG,CAClF,MAAMC,EAAQD,EAAM,OAEhBA,EAAM,MAAQ,QAChB,KAAK,cAAcC,EAAM,MAAM,KAAM,CAAA,EAC5BD,EAAM,MAAQ,UACvB,KAAK,cAAc,CAEvB,CAAA,CACD,EAED,KAAK,OAAO,iBAAiB,OAAS,GAAM,CAC1C,GAAI,EAAE,QAAW,EAAE,OAAuB,UAAU,SAAS,YAAY,EAAG,CAC1E,MAAMC,EAAQ,EAAE,OAChB,KAAK,cAAcA,EAAM,MAAM,KAAM,CAAA,CACvC,GACC,EAAI,CACT,CAKQ,iBAAwB,CACzB,KAAK,MAEVC,EAAS,KAAK,cAAe,CAAE,GAAI,KAAK,KAAK,GAAI,CACnD,CAKQ,cAAqB,CAC3B,MAAMC,EAAW,KAAK,OAAO,cAAc,YAAY,EACjDC,EAAY,KAAK,OAAO,cAAc,aAAa,EAErDD,GAAYC,IACLD,EAAA,UAAU,IAAI,SAAS,EAChCC,EAAU,MAAM,EAChBA,EAAU,OAAO,EAErB,CAKQ,cAAcC,EAAuB,CAC3C,GAAI,CAAC,KAAK,MAAQ,CAACA,EAAQ,OAAQ,CACjC,KAAK,cAAc,EACnB,MACF,CAESH,EAAA,KAAK,YAAa,CAAE,GAAI,KAAK,KAAK,GAAI,KAAMG,EAAQ,KAAK,CAAG,CAAA,EACrE,KAAK,cAAc,CACrB,CAKQ,eAAsB,CAC5B,MAAMF,EAAW,KAAK,OAAO,cAAc,YAAY,EACjDC,EAAY,KAAK,OAAO,cAAc,aAAa,EAErDD,GAAYC,IACLD,EAAA,UAAU,OAAO,SAAS,EACzBC,EAAA,MAAQ,KAAK,MAAM,MAAQ,GAEzC,CAKQ,YAAmB,CACpB,KAAK,MAEN,QAAQ,4CAA4C,GACtDF,EAAS,KAAK,cAAe,CAAE,GAAI,KAAK,KAAK,GAAI,CAErD,CAKQ,WAAWI,EAAoB,CAErC,MAAMC,MADU,OACC,QAAQ,EAAID,EAAK,QAAQ,EACpCE,EAAO,KAAK,MAAMD,GAAQ,IAAO,GAAK,GAAK,GAAG,EAEpD,OAAIC,IAAS,EACJ,QACEA,IAAS,EACX,YACEA,EAAO,EACT,GAAGA,CAAI,YAEPF,EAAK,oBAEhB,CAKQ,WAAWhB,EAAsB,CACjC,MAAAmB,EAAM,SAAS,cAAc,KAAK,EACxC,OAAAA,EAAI,YAAcnB,EACXmB,EAAI,SACb,CACF,CAGA,eAAe,OAAO,gBAAiBzB,CAAiB"}